---
- name: Restart promtail (systemd)
  become: True
  systemd:
    name: "{{ promtail_systemd_service }}"
    state: restarted
    daemon_reload: True
  when: ansible_service_mgr == 'systemd'
  tags:
    - promtail_run
    - promtail

- name: Restart promtail (launchd)
  become: True
  community.general.launchd:
    name: "{{ promtail_launchd_service }}"
    state: restarted
  when: ansible_service_mgr == 'launchd'
  tags:
    - promtail_run
    - promtail